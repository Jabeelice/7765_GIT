{
  "description": "Put message to AFSM",
  "endpoint": "Afsm.DSC-WM-LATAM.ep",
  "endpointType": "REST_WEB_SERVICE",
  "folder": "DSC-WM-LATAM",
  "highRiskStatisticMethod": "PERCENT",
  "highRiskStatisticPeriod": "MONTH",
  "ignoreProcessingStateRegistry": true,
  "node": "AnowEngine.Rest.rr",
  "owner": "tomas.drobisz@infinitedata.com",
  "postScript": "!:MODIFY_STATE RETCODE=0",
  "preScript": ":INC PICK.SYSTEM-CONFIG.AFSM.DSC-WM-LATAM.INCL\n:INC READ.SYSTEM-CONFIG.AFSM.DSC-WM-LATAM.INCL\n\n!:READ &AFSM_URL#,,,&SC_AFSM_URL#\n!:READ &AFSM_CONTEXT_M_MESSAGE#,,,&SC_AFSM_CONTEXT_M_MESSAGE#\n!:SET &AFSM_FULL_URL# = \"&AFSM_URL#/&AFSM_CONTEXT_M_MESSAGE#\"\n\n:SET &AFSM_URL# = &SC_AFSM_URL#\n:SET &AFSM_CONTEXT_M_MESSAGE# = &SC_AFSM_CONTEXT_M_MESSAGE#\n:SET &AFSM_PART_URL# = \"&AFSM_CONTEXT_M_MESSAGE#\"\n:PUB &AFSM_PART_URL#\n\n:RESOLVE &TMP_STR# = \"&IN_DESCRIPTION#\"\n:SET &DESCRIPTION# = &TMP_STR#\n:PUB &DESCRIPTION#\n\n:IF &IN_FLOW_STATUS# <> \"\"\n:  SET &FLOW_STATUS# = &IN_FLOW_STATUS#\n:ELSE\n:  SET &FLOW_STATUS# = &SC_PARENT_RET_CODE#\n:ENDIF\n:PUB &FLOW_STATUS#",
  "priority": "0",
  "processingType": "TASK",
  "serverNodeType": "REST_WEB_SERVICE",
  "statisticMethod": "MOST_FREQUENT_VALUE",
  "statisticPeriod": "MONTH",
  "tags": 
  [
    "DSC-WM-LATAM",
    "NotMonitored"
  ],
  "taskType": "REST_WEB_SERVICE_CALL",
  "useScripts": true,
  "customFieldValues": {
  },
  "processingCommand": {
    "body": "{\n  \"run_id\": ${RUN_ID#},\n  \"machine_hostname\": \"${IN_MACHINE_HOSTNAME#}\",\n  \"machine_sid\": \"${IN_MACHINE_SID#}\",\n  \"flow_status\": \"${FLOW_STATUS#}\",\n  \"description\": \"${DESCRIPTION#}\"\n}",
    "headers": "Content-Type=application/json\nrequestDataSource=text\nresponseTimeout=60\n",
    "method": "POST",
    "resultVariableLevel": "SELF",
    "url": "${AFSM_PART_URL#}"
  },
  "actions": 
  [
    {
      "duration": 15000,
      "durationThresholdType": "DURATION",
      "processingActionType": "KILL",
      "processingEventCategory": "PROCESSING",
      "processingEventType": "EXECUTING_LONG",
      "processingCommand": {
        "actionTargetType": "SELF",
        "keepForcedStatus": true,
        "operator": "",
        "restartType": "RESTART_FROM_BEGINNING"
      }
    },
    {
      "processingActionType": "FORCE_COMPLETED",
      "processingEventCategory": "PROCESSING",
      "processingEventType": "PROCESSING_FAILED",
      "processingCommand": {
        "actionTargetType": "SELF",
        "keepForcedStatus": true,
        "restartType": "RESTART_FROM_BEGINNING"
      }
    }
  ],
  "designParameters": 
  [
    {
      "allowExpressions": true,
      "defaultValue": "${SERVER_NAME#}",
      "editorType": "TEXT",
      "name": "IN_MACHINE_HOSTNAME#",
      "title": "IN_MACHINE_HOSTNAME#"
    },
    {
      "allowExpressions": true,
      "editorType": "TEXT",
      "name": "IN_MACHINE_SID#",
      "title": "IN_MACHINE_SID#"
    },
    {
      "allowExpressions": true,
      "editorType": "TEXT",
      "name": "IN_FLOW_STATUS#",
      "title": "IN_FLOW_STATUS#"
    },
    {
      "allowExpressions": true,
      "editorType": "TEXT",
      "name": "IN_DESCRIPTION#",
      "title": "IN_DESCRIPTION#"
    }
  ]
}