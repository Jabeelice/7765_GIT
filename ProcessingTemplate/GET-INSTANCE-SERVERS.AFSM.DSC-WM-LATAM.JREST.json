{
  "description": "Get instance servers from AFSM",
  "endpoint": "Afsm.DSC-WM-LATAM.ep",
  "endpointType": "REST_WEB_SERVICE",
  "folder": "DSC-WM-LATAM",
  "highRiskStatisticMethod": "PERCENT",
  "highRiskStatisticPeriod": "MONTH",
  "node": "AnowEngine.Rest.rr",
  "owner": "tomas.drobisz@infinitedata.com",
  "postScript": ":SET &APP_CODE_BACKUP_PATH# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.app_backup_path\")\n:SET &APP_RUN_MODE# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.instance_run_mode\")\n:SET &APP_RUN_MODE# = '\"&APP_RUN_MODE#\"'\n\n:PUBLISH &APP_CODE_BACKUP_PATH#,,WORKFLOW\n:PUBLISH &APP_RUN_MODE#,,WORKFLOW\n\n:DEFINE &AFAIL#, string, 2\n\n:SET &AFSM_CHECK# = 0\n\n! WMS Module\n:SET &RET# = STR_MATCH(&RESPONSE_CONTENT#, '*\"module_name\":\"WMS\"*')\n:IF &RET# = \"Y\"\n:  SET &WMS_USERNAME# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'WMS')].app_username\")\n:  SET &WMS_PRIMARY_SERVER_URL# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'WMS')].app_url\")\n:  SET &WMS_PORT# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'WMS')].app_port\")\n:  SET &SERVERS# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'WMS')].servers\")\n:  IF &SERVERS# <> \"\"\n:    IF &WMS_PRIMARY_SERVER_URL# <> \"N/A\" OR \"\"\n:      SET &WMS_PRIMARY_SERVER# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'WMS')].servers[?(@.machine_function == 'WMS')].server\")\n:      SET &WMS_PRIMARY_SHOULD_RUN# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'WMS')].servers[?(@.machine_function == 'WMS')].should_run\")\n:      SET &AFSM_CHECK# = &AFSM_CHECK# + 1\n:    ELSE\n:      SET &WMS_PRIMARY_SERVER# = \"\"\n:      SET &WMS_PRIMARY_SERVER_URL# = \"\"\n:      SET &WMS_PRIMARY_SHOULD_RUN# = \"\"\n:    ENDIF\n:    SET &WMS_CONTENT# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'WMS')]\")\n:    SET &RET# = STR_MATCH(&WMS_CONTENT#, \"*WMS-FAIL*\")\n:    IF &RET# = \"Y\"\n:      SET &WMS_FAILOVER_SERVER# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'WMS')].servers[?(@.machine_function == 'WMS-FAIL')].server\")\n:      SET &WMS_FAILOVER_SHOULD_RUN# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'WMS')].servers[?(@.machine_function == 'WMS-FAIL')].should_run\")\n:      SET &WMS_FAILOVER_SERVER_URL# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'WMS')].failover_app_url\")\n:    ELSE\n:      SET &WMS_FAILOVER_SERVER# = \"\"\n:      SET &WMS_FAILOVER_SERVER_URL# = \"\"\n:      SET &WMS_FAILOVER_SHOULD_RUN# = \"\"\n:    ENDIF\n:  ELSE\n:    SET &WMS_USERNAME# = \"\"\n:    SET &WMS_PRIMARY_SERVER# = \"\"\n:    SET &WMS_PRIMARY_SERVER_URL# = \"\"\n:    SET &WMS_PRIMARY_SHOULD_RUN# = \"\"\n:    SET &WMS_FAILOVER_SERVER# = \"\"\n:    SET &WMS_FAILOVER_SERVER_URL# = \"\"\n:    SET &WMS_FAILOVER_SHOULD_RUN# = \"\"\n:    SET &WMS_PORT# = \"\"\n:  ENDIF\n:ELSE\n:  SET &WMS_USERNAME# = \"\"\n:  SET &WMS_PRIMARY_SERVER# = \"\"\n:  SET &WMS_PRIMARY_SERVER_URL# = \"\"\n:  SET &WMS_PRIMARY_SHOULD_RUN# = \"\"\n:  SET &WMS_FAILOVER_SERVER# = \"\"\n:  SET &WMS_FAILOVER_SERVER_URL# = \"\"\n:  SET &WMS_FAILOVER_SHOULD_RUN# = \"\"\n:  SET &WMS_PORT# = \"\"\n:ENDIF\n\n:IF &WMS_PRIMARY_SHOULD_RUN# = 1\n:  SET &WMS_PRIMARY_SHOULD_RUN# = \"Y\"\n:ENDIF\n\n:IF &WMS_PRIMARY_SHOULD_RUN# = 0\n:  SET &WMS_PRIMARY_SHOULD_RUN# = \"N\"\n:ENDIF\n\n:IF &WMS_FAILOVER_SHOULD_RUN# = 1\n:  SET &WMS_FAILOVER_SHOULD_RUN# = \"Y\"\n:ENDIF\n\n:IF &WMS_FAILOVER_SHOULD_RUN# = 0\n:  SET &WMS_FAILOVER_SHOULD_RUN# = \"N\"\n:ENDIF\n\n\n\n:SET &WMS_PORT# = STR_SUB(&WMS_PORT#, '[','')\n:SET &WMS_PORT# = STR_SUB(&WMS_PORT#, ']','')\n:SET &WMS_PORT# = STR_SUB(&WMS_PORT#, '\"','')\n\n:SET &WMS_USERNAME# = STR_SUB(&WMS_USERNAME#, '[','')\n:SET &WMS_USERNAME# = STR_SUB(&WMS_USERNAME#, ']','')\n:SET &WMS_USERNAME# = STR_SUB(&WMS_USERNAME#, '\"','')\n\n:SET &WMS_PRIMARY_SERVER# = STR_SUB(&WMS_PRIMARY_SERVER#, '[','')\n:SET &WMS_PRIMARY_SERVER# = STR_SUB(&WMS_PRIMARY_SERVER#, ']','')\n:SET &WMS_PRIMARY_SERVER# = STR_SUB(&WMS_PRIMARY_SERVER#, '\"','')\n\n:SET &WMS_PRIMARY_SERVER_URL# = STR_SUB(&WMS_PRIMARY_SERVER_URL#, '[','')\n:SET &WMS_PRIMARY_SERVER_URL# = STR_SUB(&WMS_PRIMARY_SERVER_URL#, ']','')\n:SET &WMS_PRIMARY_SERVER_URL# = STR_SUB(&WMS_PRIMARY_SERVER_URL#, '\"','')\n\n:SET &WMS_PRIMARY_SHOULD_RUN# = STR_SUB(&WMS_PRIMARY_SHOULD_RUN#, '[','')\n:SET &WMS_PRIMARY_SHOULD_RUN# = STR_SUB(&WMS_PRIMARY_SHOULD_RUN#, ']','')\n:SET &WMS_PRIMARY_SHOULD_RUN# = STR_SUB(&WMS_PRIMARY_SHOULD_RUN#, '\"','')\n\n:SET &WMS_FAILOVER_SERVER# = STR_SUB(&WMS_FAILOVER_SERVER#, '[','')\n:SET &WMS_FAILOVER_SERVER# = STR_SUB(&WMS_FAILOVER_SERVER#, ']','')\n:SET &WMS_FAILOVER_SERVER# = STR_SUB(&WMS_FAILOVER_SERVER#, '\"','')\n\n:SET &WMS_FAILOVER_SERVER_URL# = STR_SUB(&WMS_FAILOVER_SERVER_URL#, '[','')\n:SET &WMS_FAILOVER_SERVER_URL# = STR_SUB(&WMS_FAILOVER_SERVER_URL#, ']','')\n:SET &WMS_FAILOVER_SERVER_URL# = STR_SUB(&WMS_FAILOVER_SERVER_URL#, '\"','')\n\n:SET &WMS_FAILOVER_SHOULD_RUN# = STR_SUB(&WMS_FAILOVER_SHOULD_RUN#, '[','')\n:SET &WMS_FAILOVER_SHOULD_RUN# = STR_SUB(&WMS_FAILOVER_SHOULD_RUN#, ']','')\n:SET &WMS_FAILOVER_SHOULD_RUN# = STR_SUB(&WMS_FAILOVER_SHOULD_RUN#, '\"','')\n\n:PUBLISH &WMS_USERNAME#,,WORKFLOW\n:PUBLISH &WMS_PRIMARY_SERVER#,,WORKFLOW\n:PUBLISH &WMS_PRIMARY_SERVER_URL#,,WORKFLOW\n:PUBLISH &WMS_PRIMARY_SHOULD_RUN#,,WORKFLOW\n:PUBLISH &WMS_FAILOVER_SERVER#,,WORKFLOW\n:PUBLISH &WMS_FAILOVER_SERVER_URL#,,WORKFLOW\n:PUBLISH &WMS_FAILOVER_SHOULD_RUN#,,WORKFLOW\n:PUBLISH &WMS_PORT#,,WORKFLOW\n\n! REFS Module\n:SET &RET# = STR_MATCH(&RESPONSE_CONTENT#, '*\"module_name\":\"REFS\"*')\n:IF &RET# = \"Y\"\n:  SET &REFS_USERNAME# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'REFS')].app_username\")\n:  SET &REFS_PRIMARY_SERVER_URL# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'REFS')].app_url\")\n:  SET &REFS_PORT# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'REFS')].app_port\")\n:  SET &SERVERS# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'REFS')].servers\")\n:  IF &SERVERS# <> \"\"\n:    IF &REFS_PRIMARY_SERVER_URL# <> \"N/A\" OR \"\"\n:      SET &REFS_PRIMARY_SERVER# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'REFS')].servers[?(@.machine_function == 'REFS')].server\")\n:      SET &REFS_PRIMARY_SHOULD_RUN# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'REFS')].servers[?(@.machine_function == 'REFS')].should_run\")\n:      SET &AFSM_CHECK# = &AFSM_CHECK# + 1\n:    ELSE\n:      SET &REFS_PRIMARY_SERVER# = \"\"\n:      SET &REFS_PRIMARY_SERVER_URL# = \"\"\n:      SET &REFS_PRIMARY_SHOULD_RUN# = \"\"\n:    ENDIF\n:    SET &REFS_CONTENT# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'REFS')]\")\n:    SET &RET# = STR_MATCH(&REFS_CONTENT#, \"*REFS-FAIL*\")\n:    IF &RET# = \"Y\"\n:      SET &REFS_FAILOVER_SERVER# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'REFS')].servers[?(@.machine_function == 'REFS-FAIL')].server\")\n:      SET &REFS_FAILOVER_SHOULD_RUN# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'REFS')].servers[?(@.machine_function == 'REFS-FAIL')].should_run\")\n:      SET &REFS_FAILOVER_SERVER_URL# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'REFS')].failover_app_url\")\n:    ELSE\n:      SET &REFS_FAILOVER_SERVER# = \"\"\n:      SET &REFS_FAILOVER_SERVER_URL# = \"\"\n:      SET &REFS_FAILOVER_SHOULD_RUN# = \"\"\n:    ENDIF\n:  ELSE\n:    SET &REFS_USERNAME# = \"\"\n:    SET &REFS_PRIMARY_SERVER# = \"\"\n:    SET &REFS_PRIMARY_SERVER_URL# = \"\"\n:    SET &REFS_PRIMARY_SHOULD_RUN# = \"\"\n:    SET &REFS_FAILOVER_SERVER# = \"\"\n:    SET &REFS_FAILOVER_SERVER_URL# = \"\"\n:    SET &REFS_FAILOVER_SHOULD_RUN# = \"\"\n:    SET &REFS_PORT# = \"\"\n:  ENDIF\n:ELSE\n:  SET &REFS_USERNAME# = \"\"\n:  SET &REFS_PRIMARY_SERVER# = \"\"\n:  SET &REFS_PRIMARY_SERVER_URL# = \"\"\n:  SET &REFS_PRIMARY_SHOULD_RUN# = \"\"\n:  SET &REFS_FAILOVER_SERVER# = \"\"\n:  SET &REFS_FAILOVER_SERVER_URL# = \"\"\n:  SET &REFS_FAILOVER_SHOULD_RUN# = \"\"\n:  SET &REFS_PORT# = \"\"\n:ENDIF\n\n:IF &REFS_PRIMARY_SHOULD_RUN# = 1\n:  SET &REFS_PRIMARY_SHOULD_RUN# = \"Y\"\n:ENDIF\n\n:IF &REFS_PRIMARY_SHOULD_RUN# = 0\n:  SET &REFS_PRIMARY_SHOULD_RUN# = \"N\"\n:ENDIF\n\n:IF &REFS_FAILOVER_SHOULD_RUN# = 1\n:  SET &REFS_FAILOVER_SHOULD_RUN# = \"Y\"\n:ENDIF\n\n:IF &REFS_FAILOVER_SHOULD_RUN# = 0\n:  SET &REFS_FAILOVER_SHOULD_RUN# = \"N\"\n:ENDIF\n\n:SET &REFS_PORT# = STR_SUB(&REFS_PORT#, '[','')\n:SET &REFS_PORT# = STR_SUB(&REFS_PORT#, ']','')\n:SET &REFS_PORT# = STR_SUB(&REFS_PORT#, '\"','')\n\n:SET &REFS_USERNAME# = STR_SUB(&REFS_USERNAME#, '[','')\n:SET &REFS_USERNAME# = STR_SUB(&REFS_USERNAME#, ']','')\n:SET &REFS_USERNAME# = STR_SUB(&REFS_USERNAME#, '\"','')\n\n:SET &REFS_PRIMARY_SERVER# = STR_SUB(&REFS_PRIMARY_SERVER#, '[','')\n:SET &REFS_PRIMARY_SERVER# = STR_SUB(&REFS_PRIMARY_SERVER#, ']','')\n:SET &REFS_PRIMARY_SERVER# = STR_SUB(&REFS_PRIMARY_SERVER#, '\"','')\n\n:SET &REFS_PRIMARY_SERVER_URL# = STR_SUB(&REFS_PRIMARY_SERVER_URL#, '[','')\n:SET &REFS_PRIMARY_SERVER_URL# = STR_SUB(&REFS_PRIMARY_SERVER_URL#, ']','')\n:SET &REFS_PRIMARY_SERVER_URL# = STR_SUB(&REFS_PRIMARY_SERVER_URL#, '\"','')\n\n:SET &REFS_PRIMARY_SHOULD_RUN# = STR_SUB(&REFS_PRIMARY_SHOULD_RUN#, '[','')\n:SET &REFS_PRIMARY_SHOULD_RUN# = STR_SUB(&REFS_PRIMARY_SHOULD_RUN#, ']','')\n:SET &REFS_PRIMARY_SHOULD_RUN# = STR_SUB(&REFS_PRIMARY_SHOULD_RUN#, '\"','')\n\n:SET &REFS_FAILOVER_SERVER# = STR_SUB(&REFS_FAILOVER_SERVER#, '[','')\n:SET &REFS_FAILOVER_SERVER# = STR_SUB(&REFS_FAILOVER_SERVER#, ']','')\n:SET &REFS_FAILOVER_SERVER# = STR_SUB(&REFS_FAILOVER_SERVER#, '\"','')\n\n:SET &REFS_FAILOVER_SERVER_URL# = STR_SUB(&REFS_FAILOVER_SERVER_URL#, '[','')\n:SET &REFS_FAILOVER_SERVER_URL# = STR_SUB(&REFS_FAILOVER_SERVER_URL#, ']','')\n:SET &REFS_FAILOVER_SERVER_URL# = STR_SUB(&REFS_FAILOVER_SERVER_URL#, '\"','')\n\n:SET &REFS_FAILOVER_SHOULD_RUN# = STR_SUB(&REFS_FAILOVER_SHOULD_RUN#, '[','')\n:SET &REFS_FAILOVER_SHOULD_RUN# = STR_SUB(&REFS_FAILOVER_SHOULD_RUN#, ']','')\n:SET &REFS_FAILOVER_SHOULD_RUN# = STR_SUB(&REFS_FAILOVER_SHOULD_RUN#, '\"','')\n\n:PUBLISH &REFS_USERNAME#,,WORKFLOW\n:PUBLISH &REFS_PRIMARY_SERVER#,,WORKFLOW\n:PUBLISH &REFS_PRIMARY_SERVER_URL#,,WORKFLOW\n:PUBLISH &REFS_PRIMARY_SHOULD_RUN#,,WORKFLOW\n:PUBLISH &REFS_FAILOVER_SERVER#,,WORKFLOW\n:PUBLISH &REFS_FAILOVER_SERVER_URL#,,WORKFLOW\n:PUBLISH &REFS_FAILOVER_SHOULD_RUN#,,WORKFLOW\n:PUBLISH &REFS_PORT#,,WORKFLOW\n\n! RW Module\n:SET &RET# = STR_MATCH(&RESPONSE_CONTENT#, '*\"module_name\":\"RW\"*')\n:IF &RET# = \"Y\"\n:  SET &RW_USERNAME# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'RW')].app_username\")\n:  SET &RW_PRIMARY_SERVER_URL# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'RW')].app_url\")\n:  SET &RW_PORT# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'RW')].app_port\")\n:  SET &SERVERS# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'RW')].servers\")\n:  IF &SERVERS# <> \"\"\n:    IF &RW_PRIMARY_SERVER_URL# <> \"N/A\" OR \"\"\n:      SET &RW_PRIMARY_SERVER# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'RW')].servers[?(@.machine_function == 'RW')].server\")\n:      SET &RW_PRIMARY_SHOULD_RUN# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'RW')].servers[?(@.machine_function == 'RW')].should_run\")\n:      SET &AFSM_CHECK# = &AFSM_CHECK# + 1\n:    ELSE\n:      SET &RW_PRIMARY_SERVER# = \"\"\n:      SET &RW_PRIMARY_SERVER_URL# = \"\"\n:    ENDIF\n:    SET &RW_CONTENT# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'RW')]\")\n:    SET &RET# = STR_MATCH(&RW_CONTENT#, \"*RW-FAIL*\")\n:    IF &RET# = \"Y\"\n:      SET &RW_FAILOVER_SERVER# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'RW')].servers[?(@.machine_function == 'RW-FAIL')].server\")\n:      SET &RW_FAILOVER_SHOULD_RUN# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'RW')].servers[?(@.machine_function == 'RW-FAIL')].should_run\")\n:      SET &RW_FAILOVER_SERVER_URL# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'RW')].failover_app_url\")\n:    ELSE\n:      SET &RW_FAILOVER_SERVER# = \"\"\n:      SET &RW_FAILOVER_SERVER_URL# = \"\"\n:      SET &RW_FAILOVER_SHOULD_RUN# = \"\"\n:    ENDIF\n:  ELSE\n:    SET &RW_USERNAME# = \"\"\n:    SET &RW_PRIMARY_SERVER# = \"\"\n:    SET &RW_PRIMARY_SERVER_URL# = \"\"\n:    SET &RW_FAILOVER_SERVER# = \"\"\n:    SET &RW_FAILOVER_SERVER_URL# = \"\"\n:    SET &RW_PORT# = \"\"\n:  ENDIF\n:ELSE\n:  SET &RW_USERNAME# = \"\"\n:  SET &RW_PRIMARY_SERVER# = \"\"\n:  SET &RW_PRIMARY_SERVER_URL# = \"\"\n:  SET &RW_PRIMARY_SHOULD_RUN# = \"\"\n:  SET &RW_FAILOVER_SERVER# = \"\"\n:  SET &RW_FAILOVER_SERVER_URL# = \"\"\n:  SET &RW_FAILOVER_SHOULD_RUN# = \"\"\n:  SET &RW_PORT# = \"\"\n:ENDIF\n\n:IF &RW_PRIMARY_SHOULD_RUN# = 1\n:  SET &RW_PRIMARY_SHOULD_RUN# = \"Y\"\n:ENDIF\n\n:IF &RW_PRIMARY_SHOULD_RUN# = 0\n:  SET &RW_PRIMARY_SHOULD_RUN# = \"N\"\n:ENDIF\n\n:IF &RW_FAILOVER_SHOULD_RUN# = 1\n:  SET &RW_FAILOVER_SHOULD_RUN# = \"Y\"\n:ENDIF\n\n:IF &RW_FAILOVER_SHOULD_RUN# = 0\n:  SET &RW_FAILOVER_SHOULD_RUN# = \"N\"\n:ENDIF\n\n:SET &RW_PORT# = STR_SUB(&RW_PORT#, '[','')\n:SET &RW_PORT# = STR_SUB(&RW_PORT#, ']','')\n:SET &RW_PORT# = STR_SUB(&RW_PORT#, '\"','')\n\n:SET &RW_USERNAME# = STR_SUB(&RW_USERNAME#, '[','')\n:SET &RW_USERNAME# = STR_SUB(&RW_USERNAME#, ']','')\n:SET &RW_USERNAME# = STR_SUB(&RW_USERNAME#, '\"','')\n\n:SET &RW_PRIMARY_SERVER# = STR_SUB(&RW_PRIMARY_SERVER#, '[','')\n:SET &RW_PRIMARY_SERVER# = STR_SUB(&RW_PRIMARY_SERVER#, ']','')\n:SET &RW_PRIMARY_SERVER# = STR_SUB(&RW_PRIMARY_SERVER#, '\"','')\n\n:SET &RW_PRIMARY_SERVER_URL# = STR_SUB(&RW_PRIMARY_SERVER_URL#, '[','')\n:SET &RW_PRIMARY_SERVER_URL# = STR_SUB(&RW_PRIMARY_SERVER_URL#, ']','')\n:SET &RW_PRIMARY_SERVER_URL# = STR_SUB(&RW_PRIMARY_SERVER_URL#, '\"','')\n\n:SET &RW_PRIMARY_SHOULD_RUN# = STR_SUB(&RW_PRIMARY_SHOULD_RUN#, '[','')\n:SET &RW_PRIMARY_SHOULD_RUN# = STR_SUB(&RW_PRIMARY_SHOULD_RUN#, ']','')\n:SET &RW_PRIMARY_SHOULD_RUN# = STR_SUB(&RW_PRIMARY_SHOULD_RUN#, '\"','')\n\n:SET &RW_FAILOVER_SERVER# = STR_SUB(&RW_FAILOVER_SERVER#, '[','')\n:SET &RW_FAILOVER_SERVER# = STR_SUB(&RW_FAILOVER_SERVER#, ']','')\n:SET &RW_FAILOVER_SERVER# = STR_SUB(&RW_FAILOVER_SERVER#, '\"','')\n\n:SET &RW_FAILOVER_SERVER_URL# = STR_SUB(&RW_FAILOVER_SERVER_URL#, '[','')\n:SET &RW_FAILOVER_SERVER_URL# = STR_SUB(&RW_FAILOVER_SERVER_URL#, ']','')\n:SET &RW_FAILOVER_SERVER_URL# = STR_SUB(&RW_FAILOVER_SERVER_URL#, '\"','')\n\n:SET &RW_FAILOVER_SHOULD_RUN# = STR_SUB(&RW_FAILOVER_SHOULD_RUN#, '[','')\n:SET &RW_FAILOVER_SHOULD_RUN# = STR_SUB(&RW_FAILOVER_SHOULD_RUN#, ']','')\n:SET &RW_FAILOVER_SHOULD_RUN# = STR_SUB(&RW_FAILOVER_SHOULD_RUN#, '\"','')\n\n:PUBLISH &RW_USERNAME#,,WORKFLOW\n:PUBLISH &RW_PRIMARY_SERVER#,,WORKFLOW\n:PUBLISH &RW_PRIMARY_SERVER_URL#,,WORKFLOW\n:PUBLISH &RW_PRIMARY_SHOULD_RUN#,,WORKFLOW\n:PUBLISH &RW_FAILOVER_SERVER#,,WORKFLOW\n:PUBLISH &RW_FAILOVER_SERVER_URL#,,WORKFLOW\n:PUBLISH &RW_FAILOVER_SHOULD_RUN#,,WORKFLOW\n:PUBLISH &RW_PORT#,,WORKFLOW\n\n! EMS Module\n:SET &RET# = STR_MATCH(&RESPONSE_CONTENT#, '*\"module_name\":\"EMS\"*')\n:IF &RET# = \"Y\"\n:  SET &EMS_USERNAME# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'EMS')].app_username\")\n:  SET &EMS_PRIMARY_SERVER_URL# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'EMS')].app_url\")\n:  SET &EMS_PORT# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'EMS')].app_port\")\n:  SET &SERVERS# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'EMS')].servers\")\n:  IF &SERVERS# <> \"\"\n:    IF &EMS_PRIMARY_SERVER_URL# <> \"N/A\" OR \"\"\n:      SET &EMS_PRIMARY_SERVER# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'EMS')].servers[?(@.machine_function == 'EMS')].server\")\n:      SET &EMS_PRIMARY_SHOULD_RUN# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'EMS')].servers[?(@.machine_function == 'EMS')].should_run\")\n:      SET &AFSM_CHECK# = &AFSM_CHECK# + 1\n:    ELSE\n:      SET &EMS_PRIMARY_SERVER# = \"\"\n:      SET &EMS_PRIMARY_SERVER_URL# = \"\"\n:      SET &EMS_PRIMARY_SHOULD_RUN# = \"\"\n:    ENDIF\n:    SET &EMS_CONTENT# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'EMS')]\")\n:    SET &RET# = STR_MATCH(&EMS_CONTENT#, \"*EMS-FAIL*\")\n:    IF &RET# = \"Y\"\n:      SET &EMS_FAILOVER_SERVER# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'EMS')].servers[?(@.machine_function == 'EMS-FAIL')].server\")\n:      SET &EMS_FAILOVER_SHOULD_RUN# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'EMS')].servers[?(@.machine_function == 'EMS-FAIL')].should_run\")\n:      SET &EMS_FAILOVER_SERVER_URL# = JSON_GET_VALUE(&RESPONSE_CONTENT#,\"$.modules[?(@.module_name == 'EMS')].failover_app_url\")\n:    ELSE\n:      SET &EMS_FAILOVER_SERVER# = \"\"\n:      SET &EMS_FAILOVER_SERVER_URL# = \"\"\n:      SET &EMS_FAILOVER_SHOULD_RUN# = \"\"\n:    ENDIF\n:  ELSE\n:    SET &EMS_USERNAME# = \"\"\n:    SET &EMS_PRIMARY_SERVER# = \"\"\n:    SET &EMS_PRIMARY_SERVER_URL# = \"\"\n:    SET &EMS_PRIMARY_SHOULD_RUN# = \"\"\n:    SET &EMS_FAILOVER_SERVER# = \"\"\n:    SET &EMS_FAILOVER_SERVER_URL# = \"\"\n:    SET &EMS_FAILOVER_SHOULD_RUN# = \"\"\n:    SET &EMS_PORT# = \"\"\n:  ENDIF\n:ELSE\n:  SET &EMS_USERNAME# = \"\"\n:  SET &EMS_PRIMARY_SERVER# = \"\"\n:  SET &EMS_PRIMARY_SERVER_URL# = \"\"\n:  SET &EMS_PRIMARY_SHOULD_RUN# = \"\"\n:  SET &EMS_FAILOVER_SERVER# = \"\"\n:  SET &EMS_FAILOVER_SERVER_URL# = \"\"\n:  SET &EMS_FAILOVER_SHOULD_RUN# = \"\"\n:  SET &EMS_PORT# = \"\"\n:ENDIF\n\n:IF &EMS_PRIMARY_SHOULD_RUN# = 1\n:  SET &EMS_PRIMARY_SHOULD_RUN# = \"Y\"\n:ENDIF\n\n:IF &EMS_PRIMARY_SHOULD_RUN# = 0\n:  SET &EMS_PRIMARY_SHOULD_RUN# = \"N\"\n:ENDIF\n\n:IF &EMS_FAILOVER_SHOULD_RUN# = 1\n:  SET &EMS_FAILOVER_SHOULD_RUN# = \"Y\"\n:ENDIF\n\n:IF &EMS_FAILOVER_SHOULD_RUN# = 0\n:  SET &EMS_FAILOVER_SHOULD_RUN# = \"N\"\n:ENDIF\n\n:SET &EMS_PORT# = STR_SUB(&EMS_PORT#, '[','')\n:SET &EMS_PORT# = STR_SUB(&EMS_PORT#, ']','')\n:SET &EMS_PORT# = STR_SUB(&EMS_PORT#, '\"','')\n\n:SET &EMS_USERNAME# = STR_SUB(&EMS_USERNAME#, '[','')\n:SET &EMS_USERNAME# = STR_SUB(&EMS_USERNAME#, ']','')\n:SET &EMS_USERNAME# = STR_SUB(&EMS_USERNAME#, '\"','')\n\n:SET &EMS_PRIMARY_SERVER# = STR_SUB(&EMS_PRIMARY_SERVER#, '[','')\n:SET &EMS_PRIMARY_SERVER# = STR_SUB(&EMS_PRIMARY_SERVER#, ']','')\n:SET &EMS_PRIMARY_SERVER# = STR_SUB(&EMS_PRIMARY_SERVER#, '\"','')\n\n:SET &EMS_PRIMARY_SERVER_URL# = STR_SUB(&EMS_PRIMARY_SERVER_URL#, '[','')\n:SET &EMS_PRIMARY_SERVER_URL# = STR_SUB(&EMS_PRIMARY_SERVER_URL#, ']','')\n:SET &EMS_PRIMARY_SERVER_URL# = STR_SUB(&EMS_PRIMARY_SERVER_URL#, '\"','')\n\n:SET &EMS_PRIMARY_SHOULD_RUN# = STR_SUB(&EMS_PRIMARY_SHOULD_RUN#, '[','')\n:SET &EMS_PRIMARY_SHOULD_RUN# = STR_SUB(&EMS_PRIMARY_SHOULD_RUN#, ']','')\n:SET &EMS_PRIMARY_SHOULD_RUN# = STR_SUB(&EMS_PRIMARY_SHOULD_RUN#, '\"','')\n\n:SET &EMS_FAILOVER_SERVER# = STR_SUB(&EMS_FAILOVER_SERVER#, '[','')\n:SET &EMS_FAILOVER_SERVER# = STR_SUB(&EMS_FAILOVER_SERVER#, ']','')\n:SET &EMS_FAILOVER_SERVER# = STR_SUB(&EMS_FAILOVER_SERVER#, '\"','')\n\n:SET &EMS_FAILOVER_SERVER_URL# = STR_SUB(&EMS_FAILOVER_SERVER_URL#, '[','')\n:SET &EMS_FAILOVER_SERVER_URL# = STR_SUB(&EMS_FAILOVER_SERVER_URL#, ']','')\n:SET &EMS_FAILOVER_SERVER_URL# = STR_SUB(&EMS_FAILOVER_SERVER_URL#, '\"','')\n\n:SET &EMS_FAILOVER_SHOULD_RUN# = STR_SUB(&EMS_FAILOVER_SHOULD_RUN#, '[','')\n:SET &EMS_FAILOVER_SHOULD_RUN# = STR_SUB(&EMS_FAILOVER_SHOULD_RUN#, ']','')\n:SET &EMS_FAILOVER_SHOULD_RUN# = STR_SUB(&EMS_FAILOVER_SHOULD_RUN#, '\"','')\n\n:PUBLISH &EMS_USERNAME#,,WORKFLOW\n:PUBLISH &EMS_PRIMARY_SERVER#,,WORKFLOW\n:PUBLISH &EMS_PRIMARY_SERVER_URL#,,WORKFLOW\n:PUBLISH &EMS_PRIMARY_SHOULD_RUN#,,WORKFLOW\n:PUBLISH &EMS_FAILOVER_SERVER#,,WORKFLOW\n:PUBLISH &EMS_FAILOVER_SERVER_URL#,,WORKFLOW\n:PUBLISH &EMS_FAILOVER_SHOULD_RUN#,,WORKFLOW\n:PUBLISH &EMS_PORT#,,WORKFLOW\n\n:PUBLISH &AFSM_CHECK#,,TASK",
  "preScript": ":INC PICK.SYSTEM-CONFIG.AFSM.DSC-WM-LATAM.INCL\n:INC READ.SYSTEM-CONFIG.AFSM.DSC-WM-LATAM.INCL\n\n!:READ &AFSM_URL#,,,&SC_AFSM_URL#\n!:READ &AFSM_CONTEXT_INSTANCE#,,,&SC_AFSM_CONTEXT_INSTANCE#\n\n:SET &AFSM_CONTEXT_INSTANCE# = &SC_AFSM_CONTEXT_INSTANCE#\n:SET &AFSM_PART_URL# = \"&AFSM_CONTEXT_INSTANCE#/${IN_INSTANCE}/&SC_RUN_ID#/machines/app/modules/${IN_MODULES}\"\n:PUB &AFSM_PART_URL# \n\n!:INC CREST.AFSM.DSC-WM-LATAM.INCL",
  "priority": "0",
  "processingType": "TASK",
  "serverNodeType": "REST_WEB_SERVICE",
  "statisticMethod": "MOST_FREQUENT_VALUE",
  "statisticPeriod": "MONTH",
  "tags": 
  [
    "DSC-WM-LATAM",
    "NotMonitored"
  ],
  "taskType": "REST_WEB_SERVICE_CALL",
  "useScripts": true,
  "customFieldValues": {
  },
  "processingCommand": {
    "body": "",
    "headers": "responseTimeout=60\n",
    "method": "GET",
    "resultVariableLevel": "SELF",
    "url": "${AFSM_PART_URL#}"
  },
  "designParameters": 
  [
    {
      "allowExpressions": true,
      "defaultValue": "${INSTANCE_NAME#}",
      "editorType": "TEXT",
      "name": "IN_INSTANCE",
      "title": "IN_INSTANCE"
    },
    {
      "allowExpressions": true,
      "defaultValue": "${REST_MODULES#}",
      "editorType": "TEXT",
      "name": "IN_MODULES",
      "title": "IN_MODULES"
    },
    {
      "editorType": "OUTPUT",
      "name": "RESPONSE_CONTENT#",
      "outputFormat": "JSON",
      "title": "RESPONSE_CONTENT#",
      "outputDefinition": {
        "dataPath": "$"
      }
    }
  ]
}