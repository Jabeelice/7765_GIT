{
  "folder": "DSC-WM-LATAM",
  "highRiskStatisticMethod": "PERCENT",
  "highRiskStatisticPeriod": "MONTH",
  "owner": "tomas.drobisz@infinitedata.com",
  "priority": "0",
  "processingType": "TASK",
  "serverNodeType": "INTERNAL",
  "statisticMethod": "AVERAGE",
  "statisticPeriod": "MONTH",
  "tags": 
  [
    "DSC-WM-LATAM",
    "NotMonitored"
  ],
  "taskType": "AE_SCRIPT",
  "customFieldValues": {
  },
  "processingCommand": {
    "script": ":SET &AUTOMIC_PRECHECK_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,AUTOMIC_PRECHECK_SCRIPT_NAME,1)\n:SET &PRECHECK_RESTORE_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,PRECHECK_RESTORE_SCRIPT_NAME,1)\n:SET &RESTORE_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,RESTORE_SCRIPT_NAME,1)\n:SET &POSTCHECK_RESTORE_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,POSTCHECK_RESTORE_SCRIPT_NAME,1)\n\n:PUB &AUTOMIC_PRECHECK_SCRIPT_NAME# \n:PUB &PRECHECK_RESTORE_SCRIPT_NAME# \n:PUB &RESTORE_SCRIPT_NAME# \n:PUB &POSTCHECK_RESTORE_SCRIPT_NAME# \n\n:SET &DB_BACKUP_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DB_BACKUP_SCRIPT_NAME,1)\n:SET &DB_PRECHECK_BACK_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DB_PRECHECK_BACK_SCRIPT_NAME,1)\n:SET &UNDEPLOY_PRE_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,UNDEPLOY_PRE_SCRIPT_NAME,1)\n:SET &DBLINK_DROP_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DBLINK_DROP_SCRIPT_NAME,1)\n:SET &POSTCHECK_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,POSTCHECK_SCRIPT_NAME,1)\n:SET &UPDATEZABBIX_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,UPDATEZABBIX_SCRIPT_NAME,1)\n:SET &UNDEPLOY_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,UNDEPLOY_SCRIPT_NAME,1)\n:SET &REPPRINTERS_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,REPPRINTERS_SCRIPT_NAME,1)\n:SET &CREATESFTP_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,CREATESFTP_SCRIPT_NAME,1)\n:SET &TZ# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,TIME_ZONE,1)\n:SET &DB_CREATE_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DB_CREATE_SCRIPT_NAME,1)\n:SET &CRONTAB_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,CRONTAB_SCRIPT_NAME,1)\n:SET &DB_PRECHECK_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DB_PRECHECK_SCRIPT_NAME,1)\n:SET &INSTALL_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,INSTALL_SCRIPT_NAME,1)\n:SET &DB_UNDEPLOY_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DB_UNDEPLOY_SCRIPT_NAME,1)\n:SET &UNDEPLOY_POS_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,UNDEPLOY_POS_SCRIPT_NAME,1)\n:SET &CONSTR_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,CONSTR_SCRIPT_NAME,1)\n:SET &DB_COPY_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DB_COPY_SCRIPT_NAME,1)\n:SET &DB_UNDEPLOY_PRE_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DB_UNDEPLOY_PRE_SCRIPT_NAME,1)\n:SET &PRECHECK_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,PRECHECK_SCRIPT_NAME,1)\n:SET &RPTABUPDATE_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,RPTABUPDATE_SCRIPT_NAME,1)\n:SET &DB_UNDEPLOY_POS_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DB_UNDEPLOY_POS_SCRIPT_NAME,1)\n:SET &DB_POSTCHECK_BACK_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DB_POSTCHECK_BACK_SCRIPT_NAME,1)\n:SET &DBLINK_CREATE_SCRIPT_NAME# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V,DBLINK_CREATE_SCRIPT_NAME,1)\n\n:PUB &DB_BACKUP_SCRIPT_NAME# \n:PUB &DB_PRECHECK_BACK_SCRIPT_NAME# \n:PUB &UNDEPLOY_PRE_SCRIPT_NAME# \n:PUB &DBLINK_DROP_SCRIPT_NAME# \n:PUB &POSTCHECK_SCRIPT_NAME# \n:PUB &UPDATEZABBIX_SCRIPT_NAME# \n:PUB &UNDEPLOY_SCRIPT_NAME# \n:PUB &REPPRINTERS_SCRIPT_NAME# \n:PUB &CREATESFTP_SCRIPT_NAME# \n:PUB &TZ# \n:PUB &DB_CREATE_SCRIPT_NAME# \n:PUB &CRONTAB_SCRIPT_NAME# \n:PUB &DB_PRECHECK_SCRIPT_NAME# \n:PUB &INSTALL_SCRIPT_NAME# \n:PUB &DB_UNDEPLOY_SCRIPT_NAME# \n:PUB &UNDEPLOY_POS_SCRIPT_NAME# \n:PUB &CONSTR_SCRIPT_NAME# \n:PUB &DB_COPY_SCRIPT_NAME# \n:PUB &DB_UNDEPLOY_PRE_SCRIPT_NAME# \n:PUB &PRECHECK_SCRIPT_NAME# \n:PUB &RPTABUPDATE_SCRIPT_NAME# \n:PUB &DB_UNDEPLOY_POS_SCRIPT_NAME# \n:PUB &DB_POSTCHECK_BACK_SCRIPT_NAME# \n:PUB &DBLINK_CREATE_SCRIPT_NAME# \n\n\n\n:SET &RUN_ID#      = SYS_ACT_PARENT_NR()\n:SET &RUN_ID#      = FORMAT(&RUN_ID#)\n!:PUBLISH &RUN_ID#,,WORKFLOW\n\n! INC/CTASK\n:SET &TICKET_TYPE# = \"\"\n\n:IF &TICKET# = \"null\"\n:  SET &TICKET# = \"\"\n:  PUBLISH &TICKET#,,WORKFLOW\n:ENDIF\n\n:IF &TICKET# <> \"\"\n:  SET &INC# = SUBSTR(&TICKET#,1,3)\n:  SET &CTA# = SUBSTR(&TICKET#,1,5)\n:  IF &INC# = \"INC\"\n:    SET &TICKET_TYPE# = \"INC\"\n:  ELSE\n:    IF &CTA# = \"CTASK\"\n:      SET &TICKET_TYPE# = \"CTASK\"\n:    ELSE\n:      PRINT \"WARNING - No valid INC/CTASK!\"\n:      SET &TICKET_TYPE# = \"\"\n:    ENDIF\n:  ENDIF\n:ENDIF\n:PUBLISH &TICKET_TYPE#\n\n! Get current time and date\n:SET &TIME_NOW#  = SYS_TIME_PHYSICAL(\"HH:MM:SS\",\"&TZ#\")\n:SET &DATE_NOW#  = SYS_DATE_PHYSICAL(\"YYYY-MM-DD\",\"&TZ#\")\n:PUBLISH &TIME_NOW#,,WORKFLOW\n:PUBLISH &DATE_NOW#,,WORKFLOW\n\n\n:SET &REST_MODULES# = \"WMS,REFS,RW,EMS\"\n:PUBLISH &REST_MODULES#,,WORKFLOW\n\n:SET &REST_MODULES_DB# = \"WMS,REFS,EMS\"\n:PUBLISH &REST_MODULES_DB#,,WORKFLOW\n\n! Target servers\n:DEFINE &ATSERVERS#, string, 20\n:DEFINE &ATSERVER#, string, 3\n:FILL &ATSERVERS#[] = STR_SPLIT(\"&TARGET_SERVERS#\", \"|\")\n:SET &LEN_ATSERVERS# = LENGTH(&ATSERVERS#[])\n\n:SET &TGT_WMS_PRIMARY_SERVER#   = \"\"\n:SET &TGT_REFS_PRIMARY_SERVER#  = \"\"\n:SET &TGT_EMS_PRIMARY_SERVER#   = \"\"\n:SET &TGT_RW_PRIMARY_SERVER#    = \"\"\n:SET &TGT_WMS_FAILOVER_SERVER#  = \"\"\n:SET &TGT_REFS_FAILOVER_SERVER# = \"\"\n:SET &TGT_RW_FAILOVER_SERVER#   = \"\"\n:SET &TGT_EMS_FAILOVER_SERVER#  = \"\"\n:SET &TGT_WMS_DB_VIP_PRI#       = \"\"\n:SET &TGT_REFS_DB_VIP_PRI#      = \"\"\n:SET &TGT_EMS_DB_VIP_PRI#       = \"\"\n:SET &TGT_WMS_ARCH_DB_VIP_PRI#  = \"\"\n\n:SET &TGT_WMS_DB_SID#           = \"\"\n:SET &TGT_REFS_DB_SID#          = \"\"\n:SET &TGT_EMS_DB_SID#           = \"\"\n:SET &TGT_WMS_ARCH_DB_SID#      = \"\"\n:SET &TGT_DB_VIP_PRI#           = \"\"\n:SET &TGT_DB_SID#               = \"\"\n:SET &SERVERS_JSON# = '\"servers\": ['\n\n:SET &RUNVAR# = 1\n:WHILE &RUNVAR# LE &LEN_ATSERVERS#\n:  FILL &ATSERVER#[] = STR_SPLIT(&ATSERVERS#[&RUNVAR#], \";\")\n:  SET &MOD# = &ATSERVER#[1]\n:  SET &SRV# = &ATSERVER#[2]\n:  SET &SID# = &ATSERVER#[3]\n:  SWITCH \"Y\"\n:    CASE &MOD# = \"WMS\"\n:      SET &TGT_WMS_PRIMARY_SERVER# = &SRV#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"WMS\", \"server\": \"&SRV#\", \"sid\": \"\" },')\n:    CASE &MOD# = \"REFS\"\n:      SET &TGT_REFS_PRIMARY_SERVER# = &SRV#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"REFS\", \"server\": \"&SRV#\", \"sid\": \"\" },')\n:    CASE &MOD# = \"RW\"\n:      SET &TGT_RW_PRIMARY_SERVER# = &SRV#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"RW\", \"server\": \"&SRV#\", \"sid\": \"\" },')\n:    CASE &MOD# = \"EMS\"\n:      SET &TGT_EMS_PRIMARY_SERVER# = &SRV#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"EMS\", \"server\": \"&SRV#\", \"sid\": \"\" },')\n:    CASE &MOD# = \"WMS-FAIL\"\n:      SET &TGT_WMS_FAILOVER_SERVER# = &SRV#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"WMS-FAIL\", \"server\": \"&SRV#\", \"sid\": \"\" },')\n:    CASE &MOD# = \"REFS-FAIL\"\n:      SET &TGT_REFS_FAILOVER_SERVER# = &SRV#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"REFS-FAIL\", \"server\": \"&SRV#\", \"sid\": \"\" },')\n:    CASE &MOD# = \"RW-FAIL\"\n:      SET &TGT_RW_FAILOVER_SERVER# = &SRV#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"RW-FAIL\", \"server\": \"&SRV#\", \"sid\": \"\" },')\n:    CASE &MOD# = \"EMS-FAIL\"\n:      SET &TGT_EMS_FAILOVER_SERVER# = &SRV#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"EMS-FAIL\", \"server\": \"&SRV#\", \"sid\": \"\" },')\n:    CASE &MOD# = \"DB_WMS\"\n:      SET &TGT_WMS_DB_SID# = &SID#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"DB_WMS\", \"server\": \"&SRV#\", \"sid\": \"&SID#\" },')\n:    CASE &MOD# = \"DB_REFS\"\n:      SET &TGT_REFS_DB_SID# = &SID#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"DB_REFS\", \"server\": \"&SRV#\", \"sid\": \"&SID#\" },')\n:    CASE &MOD# = \"DB_EMS\"\n:      SET &TGT_EMS_DB_SID# = &SID#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"DB_EMS\", \"server\": \"&SRV#\", \"sid\": \"&SID#\" },')\n:    CASE &MOD# = \"DB_ARCH\"\n:      SET &TGT_WMS_ARCH_DB_SID# = &SID#\n:      SET &TGT_WMS_ARCH_DB_VIP_PRI# = &SRV#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"DB_ARCH\", \"server\": \"&SRV#\", \"sid\": \"&SID#\" },')\n:    CASE &MOD# = \"DB_VIP_PRI\"\n:      SET &TGT_DB_VIP_PRI# = &SRV#\n:      SET &TGT_DB_SID# = &SID#\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"DB_VIP_PRI\", \"server\": \"&SRV#\", \"sid\": \"&SID#\" },')\n:    CASE &MOD# = \"DB_WMS_DR\"\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"DB_WMS_DR\", \"server\": \"&SRV#\", \"sid\": \"&SID#\" },')\n:    CASE &MOD# = \"DB_WMS_SEC\"\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"DB_WMS_SEC\", \"server\": \"&SRV#\", \"sid\": \"&SID#\" },')\n:    CASE &MOD# = \"DB_REPLICA\"\n:      SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, '{ \"machine_function\": \"DB_REPLICA\", \"server\": \"&SRV#\", \"sid\": \"&SID#\" },')\n:  ENDSWITCH\n:  SET &RUNVAR# = &RUNVAR# + 1\n:ENDWHILE\n\n:SET &LENGTH# = STR_LENGTH(&SERVERS_JSON#)\n:IF &LENGTH# > 0\n:  SET &LE# = &LENGTH# - 1\n:  SET &SERVERS_JSON# = SUBSTR(&SERVERS_JSON#, 1, &LE#)\n:ENDIF\n\n:SET &SERVERS_JSON# = STR_CAT(&SERVERS_JSON#, ']')\n\n:PUBLISH &SERVERS_JSON#,,WORKFLOW\n\n:SET &TGT_WMS_DB_VIP_PRI# = &TGT_DB_VIP_PRI#\n:SET &TGT_REFS_DB_VIP_PRI# = &TGT_DB_VIP_PRI#\n:SET &TGT_EMS_DB_VIP_PRI# = &TGT_DB_VIP_PRI#\n\n:PUBLISH &TGT_WMS_PRIMARY_SERVER#,,WORKFLOW\n:PUBLISH &TGT_REFS_PRIMARY_SERVER#,,WORKFLOW\n:PUBLISH &TGT_EMS_PRIMARY_SERVER#,,WORKFLOW\n:PUBLISH &TGT_RW_PRIMARY_SERVER#,,WORKFLOW\n:PUBLISH &TGT_WMS_FAILOVER_SERVER#,,WORKFLOW\n:PUBLISH &TGT_REFS_FAILOVER_SERVER#,,WORKFLOW\n:PUBLISH &TGT_RW_FAILOVER_SERVER#,,WORKFLOW\n:PUBLISH &TGT_EMS_FAILOVER_SERVER#,,WORKFLOW\n:PUBLISH &TGT_WMS_DB_VIP_PRI#,,WORKFLOW\n:PUBLISH &TGT_REFS_DB_VIP_PRI#,,WORKFLOW\n:PUBLISH &TGT_EMS_DB_VIP_PRI#,,WORKFLOW\n:PUBLISH &TGT_WMS_ARCH_DB_VIP_PRI#,,WORKFLOW\n:PUBLISH &TGT_WMS_DB_SID#,,WORKFLOW\n:PUBLISH &TGT_REFS_DB_SID#,,WORKFLOW\n:PUBLISH &TGT_EMS_DB_SID#,,WORKFLOW\n:PUBLISH &TGT_WMS_ARCH_DB_SID#,,WORKFLOW\n:PUBLISH &TGT_DB_VIP_PRI#,,WORKFLOW\n:PUBLISH &TGT_DB_SID#,,WORKFLOW\n\n! Instance name uppercase\n:SET &INSTANCE_NAME_UC# = STR_UC(&INSTANCE_NAME#)\n:PUBLISH &INSTANCE_NAME_UC#,,WORKFLOW\n\n! Restart type\n:SET &RESTART_TYPE_PARAMETER# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V, \"RESTART_TYPE_PARAMETER\", 1)\n:PUBLISH &RESTART_TYPE_PARAMETER#,,WORKFLOW\n\n! Login\n:SET &MODULE_LOGIN# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V, \"LOGIN\", 1)\n:PUBLISH &MODULE_LOGIN#,,WORKFLOW\n\n:SET &NUMBER_ID# = \"\"\n:PUBLISH &NUMBER_ID#,,WORKFLOW\n\n:SET &CLOSE_NUMBER_ID# = \"\"\n:PUBLISH &CLOSE_NUMBER_ID#,,WORKFLOW\n\n:SET &CTASK_UPDATE_STATUS# = \"\"\n:PUBLISH &CTASK_UPDATE_STATUS#,,WORKFLOW\n\n:SET &ZABBIX_MAINTENANCESID# = \"\"\n:PUBLISH &ZABBIX_MAINTENANCESID#,,WORKFLOW\n\n:SET &CHECK_RPTAB# = \"true\"\n:PUBLISH &CHECK_RPTAB#,,WORKFLOW\n\n! Event Assignment Group\n:IF &CHILD_SERVICE# = \"JDA WM - TEST\"\n:  SET &EVENT_ASSIGNMENT_GROUP#  = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V, \"EVENT_ASSIGNMENT_GROUP\", 1)\n:  SET &PROD_ASSIGNMENT_MESSAGE# = \"\"\n:ELSE\n:  SET &EVENT_ASSIGNMENT_GROUP#  = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V, \"EVENT_ASSIGNMENT_GROUP_PROD\", 1)\n:  SET &PROD_ASSIGNMENT_MESSAGE# = GET_VAR(CONFIG.MOVE.DSC-WM-LATAM.V, \"PROD_ASSIGNMENT_MESSAGE\", 1)\n:ENDIF\n:PUBLISH &EVENT_ASSIGNMENT_GROUP#,,WORKFLOW\n:PUBLISH &PROD_ASSIGNMENT_MESSAGE#,,WORKFLOW\n\n! Incident Site Update\n:SET &INC_SITE_UPDATE# = \"false\"\n:PUBLISH &INC_SITE_UPDATE#,,WORKFLOW\n\n:WAIT 5"
  }
}