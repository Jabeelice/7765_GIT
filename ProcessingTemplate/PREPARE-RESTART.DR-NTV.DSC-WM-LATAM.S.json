{
  "folder": "DSC-WM-LATAM",
  "owner": "tomas.drobisz@infinitedata.com",
  "priority": "0",
  "processingType": "TASK",
  "serverNodeType": "INTERNAL",
  "statisticMethod": "AVERAGE",
  "statisticPeriod": "MONTH",
  "tags": 
  [
    "DSC-WM-LATAM",
    "NotMonitored"
  ],
  "taskType": "AE_SCRIPT",
  "customFieldValues": {
  },
  "processingCommand": {
    "script": "! Restart modules\n:SET &WMS_RESTART#       = \"false\"\n:SET &REFS_RESTART#      = \"false\"\n:SET &RW_RESTART#        = \"false\"\n:SET &EMS_RESTART#       = \"false\"\n:SET &WMS_FAIL_RESTART#  = \"false\"\n:SET &REFS_FAIL_RESTART# = \"false\"\n:SET &RW_FAIL_RESTART#   = \"false\"\n:SET &EMS_FAIL_RESTART#  = \"false\"\n\n:DEFINE &ADIR#, string, 5\n:FILL &ADIR#[] = STR_SPLIT(&DIRECTION#, \"_\")\n:SET &SOURCE_DATACENTER# = &ADIR#[1]\n:SET &TARGET_DATACENTER# = &ADIR#[2]\n\n:PUBLISH &SOURCE_DATACENTER#,,WORKFLOW\n:PUBLISH &TARGET_DATACENTER#,,WORKFLOW\n\n:IF &WMS_RPTAB# = \"Y\"\n:  SET &WMS_RESTART# = \"true\"\n:ENDIF\n:IF &REFS_RPTAB# = \"Y\"\n:  SET &REFS_RESTART# = \"true\"\n:ENDIF\n:IF &RW_RPTAB# = \"Y\"\n:  SET &RW_RESTART# = \"true\"\n:ENDIF\n:IF &EMS_RPTAB# = \"Y\"\n:  SET &EMS_RESTART# = \"true\"\n:ENDIF\n:IF &WMS_FAIL_RPTAB# = \"Y\"\n:  SET &WMS_FAIL_RESTART# = \"true\"\n:ENDIF\n:IF &REFS_FAIL_RPTAB# = \"Y\"\n:  SET &REFS_FAIL_RESTART# = \"true\"\n:ENDIF\n:IF &RW_FAIL_RPTAB# = \"Y\"\n:  SET &RW_FAIL_RESTART# = \"true\"\n:ENDIF\n:IF &EMS_FAIL_RPTAB# = \"Y\"\n:  SET &EMS_FAIL_RESTART# = \"true\"\n:ENDIF\n\n! 20231024 - RG - Following lines were commented - original solution by Frantisek is quite complicated and were not working when doing DB switch only\n!:IF &TARGET_DATACENTER# = &S_DATACENTER#\n!:  IF &APP_SWITCH# = \"Y\"\n!:    IF &WMS_FAILOVER_SERVER# <> \"\"\n!:      IF &WMS_FAIL_RPTAB# = \"Y\"\n!:        SET &WMS_FAIL_RESTART# = \"true\"\n!:       ENDIF\n!:    ENDIF\n!\n!:    IF &REFS_FAILOVER_SERVER# <> \"\"\n!:      IF &REFS_FAIL_RPTAB# = \"Y\"\n!:          SET &REFS_FAIL_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &RW_FAILOVER_SERVER# <> \"\"\n!:      IF &RW_FAIL_RPTAB# = \"Y\"\n!:        SET &RW_FAIL_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &EMS_FAILOVER_SERVER# <> \"\"\n!:      IF &EMS_FAIL_RPTAB# = \"Y\"\n!:        SET &EMS_FAIL_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!:  ELSE\n!:    IF &WMS_PRIMARY_SERVER# <> \"\"\n!:      IF &WMS_RPTAB# = \"Y\"\n!:        SET &WMS_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &REFS_PRIMARY_SERVER# <> \"\"\n!:      IF &REFS_RPTAB# = \"Y\"\n!:        SET &REFS_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &EMS_PRIMARY_SERVER# <> \"\"\n!:      IF &EMS_RPTAB# = \"Y\"\n!:        SET &EMS_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &RW_PRIMARY_SERVER# <> \"\"\n!:      IF &RW_RPTAB# = \"Y\"\n!:        SET &RW_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!:  ENDIF\n!:ENDIF\n!\n!:IF &TARGET_DATACENTER# = &P_DATACENTER#\n!:  IF &APP_SWITCH# = \"Y\"\n!:    IF &WMS_PRIMARY_SERVER# <> \"\"\n!:      IF &WMS_RPTAB# = \"Y\"\n!:        SET &WMS_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &REFS_PRIMARY_SERVER# <> \"\"\n!:      IF &REFS_RPTAB# = \"Y\"\n!:        SET &REFS_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &EMS_PRIMARY_SERVER# <> \"\"\n!:      IF &EMS_RPTAB# = \"Y\"\n!:        SET &EMS_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &RW_PRIMARY_SERVER# <> \"\"\n!:      IF &RW_RPTAB# = \"Y\"\n!:        SET &RW_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!:  ELSE\n!:    IF &WMS_FAILOVER_SERVER# <> \"\"\n!:      IF &WMS_FAIL_RPTAB# = \"Y\"\n!:        SET &WMS_FAIL_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &REFS_FAILOVER_SERVER# <> \"\"\n!:      IF &REFS_FAIL_RPTAB# = \"Y\"\n!:        SET &REFS_FAIL_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &RW_FAILOVER_SERVER# <> \"\"\n!:      IF &RW_FAIL_RPTAB# = \"Y\"\n!:        SET &RW_FAIL_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!\n!:    IF &EMS_FAILOVER_SERVER# <> \"\"\n!:      IF &EMS_FAIL_RPTAB# = \"Y\"\n!:        SET &EMS_FAIL_RESTART# = \"true\"\n!:      ENDIF\n!:    ENDIF\n!:  ENDIF\n!:ENDIF\n\n:PUBLISH &WMS_RESTART#,,WORKFLOW\n:PUBLISH &REFS_RESTART#,,WORKFLOW\n:PUBLISH &RW_RESTART#,,WORKFLOW\n:PUBLISH &EMS_RESTART#,,WORKFLOW\n:PUBLISH &WMS_FAIL_RESTART#,,WORKFLOW\n:PUBLISH &REFS_FAIL_RESTART#,,WORKFLOW\n:PUBLISH &RW_FAIL_RESTART#,,WORKFLOW\n:PUBLISH &EMS_FAIL_RESTART#,,WORKFLOW"
  }
}