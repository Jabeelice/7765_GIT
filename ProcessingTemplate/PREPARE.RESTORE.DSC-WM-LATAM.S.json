{
  "folder": "DSC-WM-LATAM",
  "highRiskStatisticMethod": "PERCENT",
  "highRiskStatisticPeriod": "MONTH",
  "owner": "tomas.drobisz@infinitedata.com",
  "priority": "0",
  "processingType": "TASK",
  "serverNodeType": "INTERNAL",
  "statisticMethod": "MOST_FREQUENT_VALUE",
  "statisticPeriod": "MONTH",
  "tags": 
  [
    "DSC-WM-LATAM",
    "NotMonitored"
  ],
  "taskType": "AE_SCRIPT",
  "customFieldValues": {
  },
  "processingCommand": {
    "script": ":SET &TZ# = GET_VAR(CONFIG.${TOP_PART}.DSC-WM-LATAM.V,TIME_ZONE,1)\n:PUB &TZ#\n\n:SET &AUTOMIC_PRECHECK_SCRIPT_NAME# = GET_VAR(CONFIG.${TOP_PART}.DSC-WM-LATAM.V,AUTOMIC_PRECHECK_SCRIPT_NAME,1)\n:SET &PRECHECK_SCRIPT_NAME# = GET_VAR(CONFIG.${TOP_PART}.DSC-WM-LATAM.V, PRECHECK_SCRIPT_NAME,1)\n:SET &CRONTAB_SCRIPT_NAME# = GET_VAR(CONFIG.${TOP_PART}.DSC-WM-LATAM.V,CRONTAB_SCRIPT_NAME,1)\n:SET &RESTORE_SCRIPT_NAME# = GET_VAR(CONFIG.${TOP_PART}.DSC-WM-LATAM.V,RESTORE_SCRIPT_NAME,1)\n:SET &POSTCHECK_SCRIPT_NAME# = GET_VAR(CONFIG.${TOP_PART}.DSC-WM-LATAM.V,POSTCHECK_SCRIPT_NAME,1)\n:SET &CODECOPY_SCRIPT_NAME# = GET_VAR(CONFIG.${TOP_PART}.DSC-WM-LATAM.V,CODECOPY_SCRIPT_NAME,1)\n\n:SET &DB_PRECHECK_SCRIPT_NAME# = GET_VAR(CONFIG.${TOP_PART}.DSC-WM-LATAM.V,DB_PRECHECK_SCRIPT_NAME,1)\n:SET &DB_RESTORE_SCRIPT_NAME# = GET_VAR(CONFIG.${TOP_PART}.DSC-WM-LATAM.V,DB_RESTORE_SCRIPT_NAME,1)\n:SET &DB_POSTCHECK_SCRIPT_NAME# = GET_VAR(CONFIG.${TOP_PART}.DSC-WM-LATAM.V,DB_POSTCHECK_SCRIPT_NAME,1)\n\n:PUB &AUTOMIC_PRECHECK_SCRIPT_NAME#\n:PUB &PRECHECK_SCRIPT_NAME#\n:PUB &CRONTAB_SCRIPT_NAME#\n:PUB &RESTORE_SCRIPT_NAME#\n:PUB &POSTCHECK_SCRIPT_NAME#\n:PUB &CODECOPY_SCRIPT_NAME#\n\n:PUB &DB_PRECHECK_SCRIPT_NAME#\n:PUB &DB_RESTORE_SCRIPT_NAME#\n:PUB &DB_POSTCHECK_SCRIPT_NAME#\n\n\n:SET &RUN_ID#      = SYS_ACT_PARENT_NR()\n:SET &RUN_ID#      = FORMAT(&RUN_ID#)\n!:PUBLISH &RUN_ID#,,WORKFLOW\n\n! INC/CTASK\n:SET &TICKET_TYPE# = \"\"\n\n:IF &TICKET# = \"null\"\n:  SET &TICKET# = \"\"\n:  PUBLISH &TICKET#,,WORKFLOW\n:ENDIF\n\n:IF &TICKET# <> \"\"\n:  SET &INC# = SUBSTR(&TICKET#,1,3)\n:  SET &CTA# = SUBSTR(&TICKET#,1,5)\n:  IF &INC# = \"INC\"\n:    SET &TICKET_TYPE# = \"INC\"\n:  ELSE\n:    IF &CTA# = \"CTASK\"\n:      SET &TICKET_TYPE# = \"CTASK\"\n:    ELSE\n:      PRINT \"WARNING - No valid INC/CTASK!\"\n:      SET &TICKET_TYPE# = \"\"\n:    ENDIF\n:  ENDIF\n:ENDIF\n:PUBLISH &TICKET_TYPE#\n\n! Get current time and date\n:SET &TIME_NOW#  = SYS_TIME_PHYSICAL(\"HH:MM:SS\",\"&TZ#\")\n:SET &DATE_NOW#  = SYS_DATE_PHYSICAL(\"YYYY-MM-DD\",\"&TZ#\")\n:PUBLISH &TIME_NOW#,,WORKFLOW\n:PUBLISH &DATE_NOW#,,WORKFLOW\n\n:IF &MODULES# = \"\"\n:  PRINT \"ERROR - No modules selected!\"\n:  SET &STATUS# = CANCEL_UC_OBJECT(&RUN_ID#, \"ENDED_CANCEL\")\n:ENDIF\n\n! Module restore\n:DEFINE &AMODULES#, string, 20\n:FILL &AMODULES#[] = STR_SPLIT(\"&MODULES#\", \",\")\n:SET &LEN# = LENGTH(&AMODULES#[])\n\n:SET &WMS_RESTORE#       = \"false\"\n:SET &REFS_RESTORE#      = \"false\"\n:SET &RW_RESTORE#        = \"false\"\n:SET &EMS_RESTORE#       = \"false\"\n:SET &WMS_FAIL_RESTORE#  = \"false\"\n:SET &REFS_FAIL_RESTORE# = \"false\"\n:SET &RW_FAIL_RESTORE#   = \"false\"\n:SET &EMS_FAIL_RESTORE#  = \"false\"\n:SET &WMS_DB_RESTORE#    = \"false\"\n:SET &REFS_DB_RESTORE#   = \"false\"\n:SET &EMS_DB_RESTORE#    = \"false\"\n\n:SET &WMS_STOP#          = &WMS_RESTORE#\n:SET &REFS_STOP#         = &REFS_RESTORE#\n:SET &RW_STOP#           = &RW_RESTORE#\n:SET &EMS_STOP#          = &EMS_RESTORE#\n:SET &WMS_FAIL_STOP#     = &WMS_FAIL_RESTORE#\n:SET &REFS_FAIL_STOP#    = &REFS_FAIL_RESTORE#\n:SET &RW_FAIL_STOP#      = &RW_FAIL_RESTORE#\n:SET &EMS_FAIL_STOP#     = &EMS_FAIL_RESTORE#\n\n:SET &WMS_RESTART#       = &WMS_RESTORE#\n:SET &REFS_RESTART#      = &REFS_RESTORE#\n:SET &RW_RESTART#        = &RW_RESTORE#\n:SET &EMS_RESTART#       = &EMS_RESTORE#\n:SET &WMS_FAIL_RESTART#  = &WMS_FAIL_RESTORE#\n:SET &REFS_FAIL_RESTART# = &REFS_FAIL_RESTORE#\n:SET &RW_FAIL_RESTART#   = &RW_FAIL_RESTORE#\n:SET &EMS_FAIL_RESTART#  = &EMS_FAIL_RESTORE#\n\n:SET &REST_MODULES#     = \"\"\n:SET &REST_MODULES_DB#  = \"\"\n\n:SET &RUNVAR# = 1\n:WHILE &RUNVAR# LE &LEN#\n:  SWITCH \"Y\"\n:    CASE &AMODULES#[&RUNVAR#] = \"WMS\"\n:      SET &WMS_RESTORE# = \"true\"\n:      SET &WMS_STOP#    = \"true\"\n:      SET &WMS_RESTART# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES#, \"*WMS*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES# = STR_CAT(&REST_MODULES#, \"WMS,\")\n:      ENDIF\n:    CASE &AMODULES#[&RUNVAR#] = \"REFS\"\n:      SET &REFS_RESTORE# = \"true\"\n:      SET &REFS_STOP#    = \"true\"\n:      SET &REFS_RESTART# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES#, \"*REFS*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES# = STR_CAT(&REST_MODULES#, \"REFS,\")\n:      ENDIF\n:    CASE &AMODULES#[&RUNVAR#] = \"RW\"\n:      SET &RW_RESTORE# = \"true\"\n:      SET &RW_STOP#    = \"true\"\n:      SET &RW_RESTART# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES#, \"*RW*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES# = STR_CAT(&REST_MODULES#, \"RW,\")\n:      ENDIF\n:    CASE &AMODULES#[&RUNVAR#] = \"EMS\"\n:      SET &EMS_RESTORE# = \"true\"\n:      SET &EMS_STOP#    = \"true\"\n:      SET &EMS_RESTART# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES#, \"*EMS*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES# = STR_CAT(&REST_MODULES#, \"EMS,\")\n:      ENDIF\n:    CASE &AMODULES#[&RUNVAR#] = \"WMS-FAIL\"\n:      SET &WMS_FAIL_RESTORE# = \"true\"\n:      SET &WMS_STOP#         = \"true\"\n:      SET &WMS_RESTART#      = \"true\"\n:      SET &WMS_FAIL_STOP#    = \"true\"\n:      SET &WMS_FAIL_RESTART# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES#, \"*WMS*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES# = STR_CAT(&REST_MODULES#, \"WMS,\")\n:      ENDIF\n:    CASE &AMODULES#[&RUNVAR#] = \"REFS-FAIL\"\n:      SET &REFS_FAIL_RESTORE# = \"true\"\n:      SET &REFS_STOP#         = \"true\"\n:      SET &REFS_RESTART#      = \"true\"\n:      SET &REFS_FAIL_STOP#    = \"true\"\n:      SET &REFS_FAIL_RESTART# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES#, \"*REFS*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES# = STR_CAT(&REST_MODULES#, \"REFS,\")\n:      ENDIF\n:    CASE &AMODULES#[&RUNVAR#] = \"RW-FAIL\"\n:      SET &RW_FAIL_RESTORE# = \"true\"\n:      SET &RW_STOP#         = \"true\"\n:      SET &RW_RESTART#      = \"true\"\n:      SET &RW_FAIL_STOP#    = \"true\"\n:      SET &RW_FAIL_RESTART# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES#, \"*RW*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES# = STR_CAT(&REST_MODULES#, \"RW,\")\n:      ENDIF\n:    CASE &AMODULES#[&RUNVAR#] = \"EMS-FAIL\"\n:      SET &EMS_FAIL_RESTORE# = \"true\"\n:      SET &EMS_STOP#         = \"true\"\n:      SET &EMS_RESTART#      = \"true\"\n:      SET &EMS_FAIL_STOP#    = \"true\"\n:      SET &EMS_FAIL_RESTART# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES#, \"*EMS*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES# = STR_CAT(&REST_MODULES#, \"EMS,\")\n:      ENDIF\n:    CASE &AMODULES#[&RUNVAR#] = \"DB_WMS\"\n:      SET &WMS_DB_RESTORE# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES_DB#, \"*WMS*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES_DB# = STR_CAT(&REST_MODULES_DB#, \"WMS,\")\n:      ENDIF\n:    CASE &AMODULES#[&RUNVAR#] = \"DB_REFS\"\n:      SET &REFS_DB_RESTORE# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES_DB#, \"*REFS*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES_DB# = STR_CAT(&REST_MODULES_DB#, \"REFS,\")\n:      ENDIF\n:    CASE &AMODULES#[&RUNVAR#] = \"DB_EMS\"\n:      SET &EMS_DB_RESTORE# = \"true\"\n:      SET &RET# = STR_MATCH(&REST_MODULES_DB#, \"*EMS*\")\n:      IF &RET# = \"N\"\n:        SET &REST_MODULES_DB# = STR_CAT(&REST_MODULES_DB#, \"EMS,\")\n:      ENDIF\n:  ENDSWITCH\n:  SET &RUNVAR# = &RUNVAR# + 1\n:ENDWHILE\n\n:SET &LENGTH# = STR_LENGTH(&REST_MODULES#)\n:IF &LENGTH# > 0\n:  SET &LE# = &LENGTH# - 1\n:  SET &REST_MODULES# = SUBSTR(&REST_MODULES#, 1, &LE#)\n:ENDIF\n:PUBLISH &REST_MODULES#,,WORKFLOW\n\n:PUBLISH &WMS_RESTORE#,,WORKFLOW\n:PUBLISH &REFS_RESTORE#,,WORKFLOW\n:PUBLISH &RW_RESTORE#,,WORKFLOW\n:PUBLISH &EMS_RESTORE#,,WORKFLOW\n:PUBLISH &WMS_FAIL_RESTORE#,,WORKFLOW\n:PUBLISH &REFS_FAIL_RESTORE#,,WORKFLOW\n:PUBLISH &RW_FAIL_RESTORE#,,WORKFLOW\n:PUBLISH &EMS_FAIL_RESTORE#,,WORKFLOW\n\n:SET &LENGTH# = STR_LENGTH(&REST_MODULES_DB#)\n:IF &LENGTH# > 0\n:  SET &LE# = &LENGTH# - 1\n:  SET &REST_MODULES_DB# = SUBSTR(&REST_MODULES_DB#, 1, &LE#)\n:ENDIF\n:PUBLISH &REST_MODULES_DB#,,WORKFLOW\n\n:PUBLISH &WMS_DB_RESTORE#,,WORKFLOW\n:PUBLISH &REFS_DB_RESTORE#,,WORKFLOW\n:PUBLISH &EMS_DB_RESTORE#,,WORKFLOW\n\n! Stop modules\n:PUBLISH &WMS_STOP#,,WORKFLOW\n:PUBLISH &REFS_STOP#,,WORKFLOW\n:PUBLISH &RW_STOP#,,WORKFLOW\n:PUBLISH &EMS_STOP#,,WORKFLOW\n:PUBLISH &WMS_FAIL_STOP#,,WORKFLOW\n:PUBLISH &REFS_FAIL_STOP#,,WORKFLOW\n:PUBLISH &RW_FAIL_STOP#,,WORKFLOW\n:PUBLISH &EMS_FAIL_STOP#,,WORKFLOW\n\n! Restart modules\n:PUBLISH &WMS_RESTART#,,WORKFLOW\n:PUBLISH &REFS_RESTART#,,WORKFLOW\n:PUBLISH &RW_RESTART#,,WORKFLOW\n:PUBLISH &EMS_RESTART#,,WORKFLOW\n:PUBLISH &WMS_FAIL_RESTART#,,WORKFLOW\n:PUBLISH &REFS_FAIL_RESTART#,,WORKFLOW\n:PUBLISH &RW_FAIL_RESTART#,,WORKFLOW\n:PUBLISH &EMS_FAIL_RESTART#,,WORKFLOW\n\n:SET &RESTART_TYPE_PARAMETER# = GET_VAR(CONFIG.RESTORE.DSC-WM-LATAM.V, \"RESTART_TYPE_PARAMETER\", 1)\n:PUBLISH &RESTART_TYPE_PARAMETER#,,WORKFLOW\n\n! Login\n:SET &MODULE_LOGIN# = GET_VAR(CONFIG.RESTORE.DSC-WM-LATAM.V, \"LOGIN\", 1)\n:PUBLISH &MODULE_LOGIN#,,WORKFLOW\n\n:SET &NUMBER_ID# = \"\"\n:PUBLISH &NUMBER_ID#,,WORKFLOW\n\n:SET &CLOSE_NUMBER_ID# = \"\"\n:PUBLISH &CLOSE_NUMBER_ID#,,WORKFLOW\n\n:SET &CTASK_UPDATE_STATUS# = \"\"\n:PUBLISH &CTASK_UPDATE_STATUS#,,WORKFLOW\n\n:SET &ZABBIX_MAINTENANCESID# = \"\"\n:PUBLISH &ZABBIX_MAINTENANCESID#,,WORKFLOW\n\n! RPTAB check\n:SET &CHECK_RPTAB# = GET_VAR(CONFIG.RESTORE.DSC-WM-LATAM.V, \"CHECK_RPTAB\", 1)\n:PUBLISH &CHECK_RPTAB#,,WORKFLOW\n\n! Event Assignment Group\n:SET &EVENT_ASSIGNMENT_GROUP#  = GET_VAR(CONFIG.RESTORE.DSC-WM-LATAM.V, \"EVENT_ASSIGNMENT_GROUP_PROD\", 1)\n:SET &PROD_ASSIGNMENT_MESSAGE# = GET_VAR(CONFIG.RESTORE.DSC-WM-LATAM.V, \"PROD_ASSIGNMENT_MESSAGE\", 1)\n:SET &JDA_REBUILD_IS_PROV# = \"True\"\n\n! STRY0029851 - configuration item is not defined value then it is nonproduction and will be assigned LATAM L2\n:IF &CONFIGURATION_ITEM# <> GET_VAR(CONFIG.RESTORE.DSC-WM-LATAM.V, \"TEST_NOT_CONFIGURATION_ITEM\", 1)\n:  SET &EVENT_ASSIGNMENT_GROUP#  = GET_VAR(CONFIG.RESTORE.DSC-WM-LATAM.V, \"EVENT_ASSIGNMENT_GROUP\", 1)\n:  SET &PROD_ASSIGNMENT_MESSAGE# = \"\"\n:  SET &JDA_REBUILD_IS_PROV# = \"False\"\n:  SET &RUNVAR# = &LEN#\n:ENDIF\n\n:PUBLISH &EVENT_ASSIGNMENT_GROUP#,,WORKFLOW\n:PUBLISH &PROD_ASSIGNMENT_MESSAGE#,,WORKFLOW\n:PUBLISH &JDA_REBUILD_IS_PROV#,,WORKFLOW\n\n! Incident Site Update\n:SET &INC_SITE_UPDATE# = \"false\"\n:PUBLISH &INC_SITE_UPDATE#,,WORKFLOW\n\n:SET &INSTANCE_STOP# = 'Y'\n:PUB &INSTANCE_STOP#,,TOP "
  }
}